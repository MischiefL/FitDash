<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitDash Pro: Recomposici√≥n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        :root { 
            --orange: #f97316; --blue: #3b82f6; --red: #ef4444; 
            --green: #22c55e; --black: #0f172a; --white: #ffffff;
        }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; color: var(--black); }
        .day-btn.active { background-color: var(--orange); color: white; border-color: var(--orange); }
        .exercise-item.done { border-color: var(--green); background-color: #f0fdf4; }
        .exercise-item.done .check-box { background-color: var(--green); border-color: var(--green); color: white; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto">
        <header class="mb-8 flex flex-col md:flex-row justify-between items-center bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
            <div class="flex items-center gap-4">
                <div class="bg-black text-white p-3 rounded-2xl font-black text-xl italic">FD</div>
                <div>
                    <h1 class="text-2xl font-extrabold tracking-tighter uppercase italic">FitDash <span class="text-orange-500">Recomposici√≥n</span></h1>
                    <p class="text-slate-400 font-bold text-xs uppercase tracking-widest">Plan: Robin / Naruto</p>
                </div>
            </div>
            <div class="flex gap-2 overflow-x-auto w-full md:w-auto mt-4 md:mt-0" id="daySelector"></div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-8 space-y-6">
                <section class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 id="currentDayTitle" class="text-3xl font-black text-slate-900 uppercase italic">Lunes</h2>
                            <p id="dayFocus" class="text-blue-500 font-bold text-sm uppercase"></p>
                        </div>
                        <div class="text-right">
                            <p class="text-[10px] font-bold text-slate-400 uppercase">Calentamiento</p>
                            <p id="warmupText" class="text-xs font-bold bg-slate-100 px-3 py-1 rounded-full"></p>
                        </div>
                    </div>

                    <div id="routineContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        </div>
                </section>

                <section class="bg-slate-900 text-white rounded-[2.5rem] p-8 shadow-xl relative overflow-hidden">
                    <div class="relative z-10 flex flex-col md:row justify-between gap-6">
                        <div>
                            <h3 class="text-blue-400 font-black uppercase tracking-widest text-sm mb-4">Prescripci√≥n de Cardio</h3>
                            <p id="cardioText" class="text-2xl font-bold mb-2"></p>
                            <p class="text-slate-400 text-xs italic">Mantener ritmo constante seg√∫n gu√≠a t√©cnica.</p>
                        </div>
                        <div class="bg-blue-500/10 border border-blue-500/20 p-4 rounded-2xl">
                            <h4 class="text-white font-bold text-xs uppercase mb-2">Gu√≠a T√©cnica</h4>
                            <div class="grid grid-cols-2 gap-4 text-[10px]">
                                <div><span class="text-blue-400">Bici:</span> Niv 6-9 (Cardio)</div>
                                <div><span class="text-orange-400">Trote:</span> 4.0 - 4.2 mph</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <aside class="lg:col-span-4 space-y-6">
                <div class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm">
                    <h3 class="font-bold mb-6 flex items-center gap-2 text-slate-800 italic">üìù LOG DIARIO</h3>
                    <div class="space-y-4">
                        <input type="text" id="logReps" placeholder="Sets y Reps (Ej: 4x15)" class="w-full p-3 bg-slate-50 border-none rounded-2xl text-sm focus:ring-2 focus:ring-orange-500">
                        <input type="text" id="logCardio" placeholder="Minutos y Velocidad" class="w-full p-3 bg-slate-50 border-none rounded-2xl text-sm focus:ring-2 focus:ring-blue-500">
                        <textarea id="logNotes" rows="2" placeholder="¬øC√≥mo te sentiste?" class="w-full p-3 bg-slate-50 border-none rounded-2xl text-sm focus:ring-2 focus:ring-slate-900"></textarea>
                        <button onclick="saveLog()" id="btnSaveLog" class="w-full py-4 bg-black text-white font-black rounded-2xl hover:bg-orange-600 transition-all shadow-lg uppercase text-xs tracking-widest">Guardar Sesi√≥n</button>
                    </div>
                </div>

                <div class="bg-orange-50 p-6 rounded-3xl border border-orange-100">
                    <h3 class="font-bold mb-4 flex items-center gap-2 text-orange-700 italic">‚öñÔ∏è CONTROL DE PESO</h3>
                    <div class="flex gap-2">
                        <input type="number" id="inputWeight" step="0.1" placeholder="71.1" class="flex-1 p-3 bg-white border-none rounded-2xl text-sm focus:ring-2 focus:ring-orange-500">
                        <button onclick="saveWeight()" class="bg-orange-500 text-white px-4 rounded-2xl font-bold hover:bg-orange-600 transition-all">OK</button>
                    </div>
                    <p class="text-[10px] text-orange-600 mt-3 font-bold uppercase tracking-tighter">* Registro recomendado cada lunes en ayunas.</p>
                </div>

                <div class="bg-green-50 p-6 rounded-3xl border border-green-100">
                    <h4 class="text-green-700 font-bold uppercase text-xs mb-2 italic">Tip Naruto del D√≠a</h4>
                    <p id="dailyTip" class="text-xs leading-relaxed text-green-800 italic"></p>
                </div>
            </aside>
        </div>
    </div>

    <script>
        // --- CONFIGURACI√ìN SUPABASE ---
        const SUPABASE_URL = 'TU_URL_DE_SUPABASE';
        const SUPABASE_KEY = 'TU_KEY_ANON_DE_SUPABASE';
        const supabase = exports = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        const plan = {
            "Lunes": {
                focus: "Espalda y Tr√≠ceps", warmup: "3.1 mph | 10 min",
                exercises: [
                    {n: "Remo inclinado", r: "15 reps", img: "https://images.unsplash.com/photo-1598971639058-aba3cba81db5?auto=format&fit=crop&q=60&w=200"},
                    {n: "Copa de Tr√≠ceps", r: "15 reps", img: "https://images.unsplash.com/photo-1581009146145-b5ef050c2e1e?auto=format&fit=crop&q=60&w=200"}
                ],
                cardio: "Bicicleta Resistencia 7 | 15 min", tip: "Postura Robin: Hombros abajo para evitar falsa papada."
            },
            "Martes": {
                focus: "Piernas (Fuerza Base)", warmup: "2.8 mph | 5 min",
                exercises: [
                    {n: "Sentadillas", r: "20 reps", img: "https://images.unsplash.com/photo-1574673001865-4527bc33c945?auto=format&fit=crop&q=60&w=200"},
                    {n: "Desplantes", r: "12 por pierna", img: "https://images.unsplash.com/photo-1590239068512-63276724babd?auto=format&fit=crop&q=60&w=200"}
                ],
                cardio: "HIIT: 1 min Res 13 / 1 min Res 4 (10 veces)", tip: "Hidr√°tate bien en Tampico con electrolitos."
            },
            "Jueves": {
                focus: "Brazos y Postura", warmup: "Bicicleta Res 5 | 10 min",
                exercises: [
                    {n: "Press Militar", r: "12 reps", img: "https://images.unsplash.com/photo-1541534741688-6078c6bc35e5?auto=format&fit=crop&q=60&w=200"},
                    {n: "Push-ups (Rodillas)", r: "Al fallo", img: "https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?auto=format&fit=crop&q=60&w=200"}
                ],
                cardio: "Trote Base: 4.2 mph | 25 min", tip: "El col√°geno mantiene la firmeza de tu rostro y brazos."
            }
            // Agrega aqu√≠ el resto de los d√≠as siguiendo el mismo formato...
        };

        let currentDay = "Lunes";

        function init() {
            const selector = document.getElementById('daySelector');
            Object.keys(plan).forEach(day => {
                const btn = document.createElement('button');
                btn.innerText = day.substring(0, 3);
                btn.className = `day-btn px-4 py-2 rounded-2xl text-[10px] font-black uppercase transition-all border-2 border-slate-100`;
                btn.onclick = () => setDay(day);
                btn.id = `btn-${day}`;
                selector.appendChild(btn);
            });
            const today = new Date().toLocaleDateString('es-ES', {weekday: 'long'});
            setDay(today.charAt(0).toUpperCase() + today.slice(1));
        }

        function setDay(day) {
            if(!plan[day]) day = "Lunes";
            currentDay = day;
            document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${day}`)?.classList.add('active');
            
            document.getElementById('currentDayTitle').innerText = day;
            document.getElementById('dayFocus').innerText = plan[day].focus;
            document.getElementById('warmupText').innerText = plan[day].warmup;
            document.getElementById('cardioText').innerText = plan[day].cardio;
            document.getElementById('dailyTip').innerText = plan[day].tip;

            const container = document.getElementById('routineContainer');
            container.innerHTML = "";
            plan[day].exercises.forEach(ex => {
                const div = document.createElement('div');
                div.className = "exercise-item group flex items-center gap-4 p-4 bg-white border-2 border-slate-50 rounded-2xl cursor-pointer transition-all hover:border-blue-100";
                div.onclick = () => div.classList.toggle('done');
                div.innerHTML = `
                    <img src="${ex.img}" class="w-16 h-16 rounded-xl object-cover border border-slate-100">
                    <div class="flex-1">
                        <p class="font-black text-sm uppercase tracking-tighter">${ex.n}</p>
                        <p class="text-xs text-slate-400 font-bold">${ex.r}</p>
                    </div>
                    <div class="check-box w-6 h-6 border-2 border-slate-200 rounded-full flex items-center justify-center text-[10px]">‚úì</div>
                `;
                container.appendChild(div);
            });
        }

        async function saveLog() {
            const btn = document.getElementById('btnSaveLog');
            btn.innerText = "Guardando...";
            const { error } = await supabase.from('workout_logs').insert([{
                day: currentDay,
                reps: document.getElementById('logReps').value,
                cardio: document.getElementById('logCardio').value,
                notes: document.getElementById('logNotes').value
            }]);
            
            if (error) alert("Error: " + error.message);
            else {
                alert("¬°Entrenamiento guardado!");
                btn.innerText = "Guardar Sesi√≥n";
            }
        }

        async function saveWeight() {
            const weight = document.getElementById('inputWeight').value;
            if(!weight) return;
            const { error } = await supabase.from('weight_logs').insert([{ weight: parseFloat(weight) }]);
            if (error) alert(error.message);
            else alert("Peso registrado: " + weight + "kg");
        }

        window.onload = init;
    </script>
</body>
</html>
